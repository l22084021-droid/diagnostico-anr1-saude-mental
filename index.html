<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Diagn√≥stico ANR1 - SAMA</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #f0f7f0, #e8f5e9);
      color: #2d3748;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 850px;
      margin: 0 auto;
      padding: 20px;
      text-align: center;
    }
    header img.logo {
      height: 70px;
      margin-bottom: 15px;
    }
    h1, h2 {
      color: #5d9e4a;
    }
    .btn {
      background: #5d9e4a;
      color: white;
      padding: 14px 30px;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 15px;
    }
    .btn:hover {
      background: #4a8038;
    }
    .step {
      display: none;
      text-align: left;
    }
    .step.active {
      display: block;
    }
    .form-group {
      margin-bottom: 15px;
    }
    label {
      font-weight: 600;
      display: block;
      margin-bottom: 5px;
    }
    input, select {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    .progress {
      background: #e0e0e0;
      border-radius: 8px;
      margin: 15px 0;
      height: 10px;
      width: 100%;
    }
    .progress-bar {
      background: #5d9e4a;
      height: 10px;
      width: 0%;
      border-radius: 8px;
    }
    footer {
      margin-top: 30px;
      font-size: 14px;
      color: #555;
      text-align: center;
    }
    .opcao { margin: 6px 0; }
  </style>
</head>
<body>
  <div class="container">

    <!-- TELA INICIAL -->
    <div id="inicio" class="step active">
      <header>
        <img src="assets/logo-sama.png" alt="Logo SAMA" class="logo">
        <h1>üß† Diagn√≥stico ANR1</h1>
        <p>Clima Organizacional e Sa√∫de Mental</p>
      </header>

      <div id="qrcode" style="display:flex; justify-content:center; margin:20px 0;"></div>

      <button class="btn" onclick="irParaFormulario()">Come√ßar Diagn√≥stico</button>
    </div>

    <!-- FORMUL√ÅRIO -->
    <div id="formulario" class="step">
      <header>
        <img src="assets/logo-sama.png" alt="Logo SAMA" class="logo">
        <h2>üìã Question√°rio ANR1</h2>
        <p id="contador">Pergunta 0 de 15</p>
      </header>

      <div class="progress"><div class="progress-bar" id="progress-bar"></div></div>

      <form id="form">
        <!-- Dados da Empresa -->
        <div id="step-0" class="step active">
          <h3>Informa√ß√µes da Empresa</h3>
          <div class="form-group">
            <label for="empresa">Nome da Empresa</label>
            <input type="text" id="empresa" required>
          </div>
          <div class="form-group">
            <label for="cnpj">CNPJ</label>
            <input type="text" id="cnpj" required placeholder="00.000.000/0000-00">
          </div>
          <div class="form-group">
            <label for="colaboradores">N¬∫ de Colaboradores</label>
            <input type="number" id="colaboradores" required min="1">
          </div>
          <button type="button" class="btn" onclick="nextStep()">Avan√ßar</button>
        </div>

        <!-- Perguntas ser√£o geradas via script -->
        <div id="perguntas"></div>

        <!-- Resultado -->
        <div id="resultado" class="step">
          <h2>üéâ Obrigado, <span id="nome-empresa"></span>!</h2>
          <p><strong>CNPJ:</strong> <span id="cnpj-empresa"></span></p>
          <p><strong>Colaboradores:</strong> <span id="colaboradores-empresa"></span></p>
          <h3>Conformidade ANR1:</h3>
          <h2 id="pontuacao-final"></h2>
          <p id="mensagem-final"></p>
          <button type="button" class="btn" onclick="location.reload()">Voltar ao In√≠cio</button>
        </div>
      </form>
    </div>

    <footer>
      &copy; 2025 SAMA Para + Equil√≠brio. Todos os direitos reservados.
    </footer>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
  <script>
    // Gerar QR Code
    new QRCode(document.getElementById("qrcode"), {
      text: window.location.href,
      width: 200,
      height: 200,
      colorDark : "#5d9e4a",
      colorLight : "#ffffff",
      correctLevel : QRCode.CorrectLevel.H
    });

    let currentStep = 0;
    const totalPerguntas = 15;

    // Perguntas e alternativas com pesos (% conformidade)
    const perguntas = [
      {
        texto: "Qual foi o √≠ndice de turnover (rotatividade de colaboradores) nos √∫ltimos 12 meses?",
        opcoes: {
          "Menos de 5%": 100,
          "Entre 5% e 10%": 80,
          "Entre 10% e 20%": 50,
          "Acima de 20%": 20,
          "N√£o monitoramos esse dado": 0
        }
      },
      {
        texto: "Nos √∫ltimos 6 meses, houve afastamentos por burnout?",
        opcoes: {
          "N√£o houve casos registrados": 100,
          "Sim, entre 1 e 5 casos": 60,
          "Sim, mais de 5 casos": 30,
          "N√£o sabemos identificar se foi burnout": 20,
          "N√£o monitoramos": 0
        }
      },
      {
        texto: "Quantos atestados m√©dicos foram entregues nos √∫ltimos 3 meses?",
        opcoes: {
          "Nenhum": 100,
          "De 1 a 5": 80,
          "De 6 a 15": 50,
          "Mais de 15": 20,
          "N√£o temos esse controle": 0
        }
      },
      {
        texto: "Como os conflitos interpessoais s√£o resolvidos?",
        opcoes: {
          "Por media√ß√£o do RH ou lideran√ßa": 100,
          "Por di√°logo direto entre os envolvidos": 80,
          "Por afastamento ou troca de setor": 50,
          "N√£o h√° processo definido": 20,
          "N√£o sabemos": 0
        }
      },
      {
        texto: "Quais s√£o as principais causas de afastamento na empresa?",
        opcoes: {
          "Doen√ßas f√≠sicas": 80,
          "Doen√ßas emocionais": 40,
          "Acidentes de trabalho": 50,
          "Problemas familiares": 60,
          "N√£o temos dados": 0
        }
      },
      {
        texto: "Sua empresa j√° enfrentou demanda judicial por ass√©dio moral nos √∫ltimos 5 anos?",
        opcoes: {
          "N√£o, nunca tivemos casos nem advert√™ncias": 100,
          "Nenhum caso, mas j√° houve advert√™ncias": 70,
          "Sim, 1 ou 2 casos": 50,
          "Sim, entre 3 e 5 casos": 30,
          "Sim, mais de 5 casos": 0
        }
      },
      {
        texto: "Na sua percep√ß√£o, o ass√©dio moral pode ocorrer na empresa?",
        opcoes: {
          "N√£o ocorre, clima saud√°vel": 100,
          "Pouco prov√°vel, temos controle": 80,
          "Raramente ocorre": 60,
          "Ocorre ocasionalmente": 30,
          "Ocorre frequentemente": 0
        }
      },
      {
        texto: "A empresa possui pol√≠ticas para prevenir ass√©dio moral?",
        opcoes: {
          "Sim, com pol√≠ticas, treinamentos regulares e acompanhamento cont√≠nuo": 100,
          "Sim, com pol√≠ticas e treinamentos peri√≥dicos": 80,
          "Sim, apenas pol√≠ticas escritas": 50,
          "Planejamos implementar": 20,
          "N√£o temos pol√≠ticas": 0
        }
      },
      {
        texto: "Os colaboradores sentem sobrecarga no trabalho?",
        opcoes: {
          "Nunca": 100,
          "Raramente": 80,
          "Ocasionalmente": 50,
          "Frequentemente": 20,
          "N√£o temos informa√ß√£o": 0
        }
      },
      {
        texto: "Como a empresa lida com sobrecarga de trabalho?",
        opcoes: {
          "Redistribui√ß√£o de tarefas": 100,
          "Contrata√ß√£o tempor√°ria": 80,
          "Incentivo √† pausa": 60,
          "N√£o h√° a√ß√µes espec√≠ficas": 20,
          "N√£o sabemos": 0
        }
      },
      {
        texto: "H√° relatos de intera√ß√µes sociais negativas?",
        opcoes: {
          "N√£o h√° relatos": 100,
          "Sim, mas de forma pontual": 60,
          "Sim, com frequ√™ncia": 20,
          "N√£o sabemos identificar": 20,
          "N√£o monitoramos": 0
        }
      },
      {
        texto: "A empresa possui a√ß√µes para ambiente emocionalmente saud√°vel?",
        opcoes: {
          "Sim, com programas estruturados": 100,
          "Sim, com a√ß√µes pontuais": 60,
          "N√£o, mas temos interesse": 30,
          "N√£o realizamos a√ß√µes": 0,
          "N√£o sei informar": 0
        }
      },
      {
        texto: "A empresa contrataria equipe especializada para ANR1?",
        opcoes: {
          "J√° estamos em processo de contrata√ß√£o": 100,
          "Temos interesse em contratar": 80,
          "Talvez, dependendo do custo": 50,
          "N√£o, realizaremos internamente": 20,
          "N√£o temos conhecimento": 0
        }
      },
      {
        texto: "Qual faixa de or√ßamento destinar√° √† ANR1?",
        opcoes: {
          "Acima de R$ 30.000": 100,
          "Entre R$ 15.001 e R$ 30.000": 80,
          "Entre R$ 5.001 e R$ 15.000": 60,
          "At√© R$ 5.000": 40,
          "Ainda n√£o definimos": 0
        }
      },
      {
        texto: "Quais diferenciais a equipe especializada deve possuir? (m√∫ltipla escolha)",
        opcoes: {
          "Experi√™ncia em sa√∫de mental corporativa": 15,
          "Conhecimento sobre ANR1 e legisla√ß√£o": 15,
          "Capacidade de personalizar solu√ß√µes": 15,
          "Equipe multidisciplinar": 15,
          "Hist√≥rico em empresas do setor": 10,
          "Uso de ferramentas tecnol√≥gicas": 10,
          "Abordagem humanizada": 10,
          "Custo-benef√≠cio competitivo": 10
        },
        multipla: true
      }
    ];

    const perguntasDiv = document.getElementById("perguntas");
    perguntas.forEach((p, i) => {
      const div = document.createElement("div");
      div.classList.add("step");
      div.id = "step-" + (i+1);

      let html = `<h3>Pergunta ${i+1}</h3><p>${p.texto}</p>`;

      if (p.multipla) {
        Object.keys(p.opcoes).forEach(op => {
          html += `<div class="opcao"><label><input type="checkbox" name="p${i}" value="${p.opcoes[op]}"> ${op}</label></div>`;
        });
      } else {
        Object.keys(p.opcoes).forEach(op => {
          html += `<div class="opcao"><label><input type="radio" name="p${i}" value="${p.opcoes[op]}" required> ${op}</label></div>`;
        });
      }

      html += `<button type="button" class="btn" onclick="nextStep()">Avan√ßar</button>`;
      div.innerHTML = html;
      perguntasDiv.appendChild(div);
    });

    function irParaFormulario() {
      document.getElementById("inicio").classList.remove("active");
      document.getElementById("formulario").classList.add("active");
    }

    function nextStep() {
      const steps = document.querySelectorAll(".step");
      steps[currentStep].classList.remove("active");
      currentStep++;
      if (currentStep < steps.length) {
        steps[currentStep].classList.add("active");
        atualizarProgresso();
      }
      if (currentStep === totalPerguntas + 1) calcularResultado();
    }

    function atualizarProgresso() {
      const progress = (currentStep / (totalPerguntas+1)) * 100;
      document.getElementById("progress-bar").style.width = progress + "%";
      document.getElementById("contador").innerText = 
        `Pergunta ${Math.min(currentStep, totalPerguntas)} de ${totalPerguntas}`;
    }

    function calcularResultado() {
      let soma = 0;
      let qtd = 0;

      perguntas.forEach((p, i) => {
        if (p.multipla) {
          const checks = document.querySelectorAll(`input[name="p${i}"]:checked`);
          checks.forEach(c => soma += parseInt(c.value));
          qtd += 100; // normaliza√ß√£o
        } else {
          const sel = document.querySelector(`input[name="p${i}"]:checked`);
          if (sel) {
            soma += parseInt(sel.value);
            qtd += 100;
          }
        }
      });

      const score = Math.round((soma / qtd) * 100);
      document.getElementById("pontuacao-final").innerText = score + "%";

      let msg = "‚ú® Excelente! Sua empresa est√° em alta conformidade com a ANR1.";
      if (score < 80) msg = "‚ö†Ô∏è Aten√ß√£o! H√° pontos a melhorar no cumprimento da ANR1.";
      if (score < 50) msg = "‚ùå Risco alto! A SAMA recomenda a√ß√£o imediata.";

      document.getElementById("mensagem-final").innerText = msg;

      document.getElementById("nome-empresa").innerText = 
        document.getElementById("empresa").value;
      document.getElementById("cnpj-empresa").innerText = 
        document.getElementById("cnpj").value;
      document.getElementById("colaboradores-empresa").innerText = 
        document.getElementById("colaboradores").value;
    }
  </script>
</body>
</html>
    
